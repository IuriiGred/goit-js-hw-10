{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst buttonStart = document.querySelector('[data-start]');\nconst inputEl = document.querySelector('#datetime-picker');\nconst daysValue = document.querySelector('[data-days]');\nconst hoursValue = document.querySelector('[data-hours]');\nconst minutesValue = document.querySelector('[data-minutes]');\nconst secondsValue = document.querySelector('[data-seconds]');\n\nlet countdownIntervalId;\nbuttonStart.disabled = true;\n\nconst options = {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    onClose(selectedDates) {\n      buttonStart.disabled = false;\n      checkSelectedDate(selectedDates[0]);\n    },\n};\n\nflatpickr('#datetime-picker', options);\n  buttonStart.addEventListener('click', () => {\n    const selectedDate = new Date(inputEl.value);\n    inputEl.disabled = true;\n\n    checkSelectedDate(selectedDate);\n    buttonStart.disabled = true;\n    buttonStart.classList.toggle('isActive');\n    startCountdown(selectedDate);\n});\n\nfunction checkSelectedDate(date) {\n  if (date < new Date()) {\n    iziToast.error({\n      // title: 'Error',\n      backgroundColor: \"#ef4040\",\n      timeout: 2000,\n      position: \"topRight\",\n      message: \"Please choose a date in the future\",\n    });\n    buttonStart.disabled = true;\n    return;\n  }\n}\n\nfunction startCountdown(value) {\n\n  function updateCountdown() {\n    const timeLeft = getTimeRemaining(value);\n    daysValue.textContent = addLeadingZero(timeLeft.days);\n    hoursValue.textContent = addLeadingZero(timeLeft.hours);\n    minutesValue.textContent = addLeadingZero(timeLeft.minutes);\n    secondsValue.textContent = addLeadingZero(timeLeft.seconds);\n\n    if (timeLeft.total <= 1000) {\n      clearInterval(countdownIntervalId);\n      buttonStart.disabled = false;\n      iziToast.success({\n        // title: 'OK',\n        backgroundColor: \"#b5ea7c\",\n        timeout: 2000,\n        position: \"topRight\",\n        message: 'Successfully inserted record!',\n      });\n      buttonStart.classList.toggle('isActive');\n      buttonStart.disabled = true;\n      inputEl.disabled = false;\n    }\n  }\n\n  updateCountdown();\n\n  countdownIntervalId = setInterval(updateCountdown, 1000);\n}\n\nfunction addLeadingZero(value) {\n  return value.toString().padStart(2, '0');\n}\n\nfunction getTimeRemaining(endValue) {\n  const total = endValue.getTime() - Date.now();\n  const seconds = Math.floor((total / 1000) % 60);\n  const minutes = Math.floor((total / 1000 / 60) % 60);\n  const hours = Math.floor((total / (1000 * 60 * 60)) % 24);\n  const days = Math.floor(total / (1000 * 60 * 60 * 24));\n\n  return {\n    total,\n    days,\n    hours,\n    minutes,\n    seconds,\n  };\n}"],"names":["buttonStart","inputEl","daysValue","hoursValue","minutesValue","secondsValue","countdownIntervalId","options","selectedDates","checkSelectedDate","flatpickr","selectedDate","startCountdown","date","iziToast","value","updateCountdown","timeLeft","getTimeRemaining","addLeadingZero","endValue","total","seconds","minutes","hours","days"],"mappings":"2FAKA,MAAMA,EAAc,SAAS,cAAc,cAAc,EACnDC,EAAU,SAAS,cAAc,kBAAkB,EACnDC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAe,SAAS,cAAc,gBAAgB,EACtDC,EAAe,SAAS,cAAc,gBAAgB,EAE5D,IAAIC,EACJN,EAAY,SAAW,GAEvB,MAAMO,EAAU,CACZ,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrBR,EAAY,SAAW,GACvBS,EAAkBD,EAAc,CAAC,CAAC,CACnC,CACL,EAEAE,EAAU,mBAAoBH,CAAO,EACnCP,EAAY,iBAAiB,QAAS,IAAM,CAC1C,MAAMW,EAAe,IAAI,KAAKV,EAAQ,KAAK,EAC3CA,EAAQ,SAAW,GAEnBQ,EAAkBE,CAAY,EAC9BX,EAAY,SAAW,GACvBA,EAAY,UAAU,OAAO,UAAU,EACvCY,EAAeD,CAAY,CAC/B,CAAC,EAED,SAASF,EAAkBI,EAAM,CAC/B,GAAIA,EAAO,IAAI,KAAQ,CACrBC,EAAS,MAAM,CAEb,gBAAiB,UACjB,QAAS,IACT,SAAU,WACV,QAAS,oCACf,CAAK,EACDd,EAAY,SAAW,GACvB,MACD,CACH,CAEA,SAASY,EAAeG,EAAO,CAE7B,SAASC,GAAkB,CACzB,MAAMC,EAAWC,EAAiBH,CAAK,EACvCb,EAAU,YAAciB,EAAeF,EAAS,IAAI,EACpDd,EAAW,YAAcgB,EAAeF,EAAS,KAAK,EACtDb,EAAa,YAAce,EAAeF,EAAS,OAAO,EAC1DZ,EAAa,YAAcc,EAAeF,EAAS,OAAO,EAEtDA,EAAS,OAAS,MACpB,cAAcX,CAAmB,EACjCN,EAAY,SAAW,GACvBc,EAAS,QAAQ,CAEf,gBAAiB,UACjB,QAAS,IACT,SAAU,WACV,QAAS,+BACjB,CAAO,EACDd,EAAY,UAAU,OAAO,UAAU,EACvCA,EAAY,SAAW,GACvBC,EAAQ,SAAW,GAEtB,CAEDe,IAEAV,EAAsB,YAAYU,EAAiB,GAAI,CACzD,CAEA,SAASG,EAAeJ,EAAO,CAC7B,OAAOA,EAAM,SAAU,EAAC,SAAS,EAAG,GAAG,CACzC,CAEA,SAASG,EAAiBE,EAAU,CAClC,MAAMC,EAAQD,EAAS,QAAS,EAAG,KAAK,IAAG,EACrCE,EAAU,KAAK,MAAOD,EAAQ,IAAQ,EAAE,EACxCE,EAAU,KAAK,MAAOF,EAAQ,IAAO,GAAM,EAAE,EAC7CG,EAAQ,KAAK,MAAOH,GAAS,IAAO,GAAK,IAAO,EAAE,EAClDI,EAAO,KAAK,MAAMJ,GAAS,IAAO,GAAK,GAAK,GAAG,EAErD,MAAO,CACL,MAAAA,EACA,KAAAI,EACA,MAAAD,EACA,QAAAD,EACA,QAAAD,CACJ,CACA"}